<div id="login-container">
    <h2>AccuLynx v2 Sync</h2>
    <p>Enter the shared organization password to begin.</p>
    
    <form id="login-form">
        <input type="password" id="password-input" placeholder="Password" required>
        <button type="submit">Unlock System</button>
    </form>
    
    <p id="error-message" style="color: red; display: none;">Incorrect password. Please try again.</p>
</div>

<script>
    // Listen for the form submission instead of just a button click
    document.getElementById('login-form').addEventListener('submit', async (e) => {
        e.preventDefault(); // Stop the page from refreshing
        
        const password = document.getElementById('password-input').value;
        
        const response = await fetch('/api/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ password })
        });

        if (response.ok) {
            document.getElementById('login-container').style.display = 'none';
            document.getElementById('upload-container').style.display = 'block';
        } else {
            document.getElementById('error-message').style.display = 'block';
        }
    });
</script>
